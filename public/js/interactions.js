async function followQuestion(){let e=new URL(window.location.href).pathname.split("/").pop();return await fetch("/questions/follow/"+e,{method:"PATCH",headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}}).then(function(e){return e.text()}).then(function(e){let t=document.getElementById("follow-button");"Followed"===e?(t.classList.add("on"),t.classList.remove("off")):(t.classList.add("off"),t.classList.remove("on"))}).catch(function(e){console.log("Failed to fetch page: ",e)})}async function voteQuestion(e,t,o){return await fetch(`/question/${e}/${t}`,{method:"PATCH",headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}}).then(function(e){return e.json()}).then(function(e){o.textContent=e.voteBalance})}async function voteAnswer(e,t,o){return await fetch(`/answer/${e}/${t}`,{method:"PATCH",headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}}).then(function(e){return e.json()}).then(function(e){o.textContent=e.voteBalance})}async function enableQuestionInteractions(e){let t=new URL(window.location.href).pathname.split("/").pop(),o=e.querySelector(".upvote"),n=e.querySelector(".downvote"),s=e.querySelector(".vote-count"),a=document.getElementById("follow-button");o&&o.addEventListener("click",()=>{o.classList.contains("on")?(voteQuestion("upvote",t,s),o.classList.remove("on"),o.classList.add("off")):(voteQuestion("upvote",t,s),o.classList.remove("off"),o.classList.add("on"),n.classList.remove("on"),n.classList.add("off"))}),n&&n.addEventListener("click",()=>{n.classList.contains("on")?(voteQuestion("downvote",t,s),n.classList.remove("on"),n.classList.add("off")):(voteQuestion("downvote",t,s),n.classList.remove("off"),n.classList.add("on"),o.classList.remove("on"),o.classList.add("off"))}),a&&a.addEventListener("click",followQuestion)}async function enableAnswerInteractions(e){e.forEach(e=>{let t=e.dataset.id,o=e.querySelector(".upvote"),n=e.querySelector(".downvote"),s=e.querySelector(".vote-count");o&&o.addEventListener("click",()=>{o.classList.contains("on")?(voteAnswer("upvote",t,s),o.classList.remove("on"),o.classList.add("off")):(voteAnswer("upvote",t,s),o.classList.remove("off"),o.classList.add("on"),n.classList.remove("on"),n.classList.add("off"))}),n&&n.addEventListener("click",()=>{n.classList.contains("on")?(voteAnswer("downvote",t,s),n.classList.remove("on"),n.classList.add("off")):(voteAnswer("downvote",t,s),n.classList.remove("off"),n.classList.add("on"),o.classList.remove("on"),o.classList.add("off"))})})}async function enableInteractions(){let e=document.getElementById("question-interactions"),t=document.querySelectorAll(".answer-interactions");e&&enableQuestionInteractions(e),t&&enableAnswerInteractions(t)}export default enableInteractions;